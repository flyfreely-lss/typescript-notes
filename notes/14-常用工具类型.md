# å¸¸ç”¨å·¥å…·ç±»å‹

ä»‹ç»ä¸€äº›ç±»å‹å·¥å…·çš„è®¾è®¡ä¸å®ç°ã€‚

## **1 å·¥å…·ç±»å‹çš„è®¾è®¡**

### 1.1 æ³›å‹

å¯ä»¥æŠŠå·¥å…·ç±»å‹ç±»æ¯” javascript ä¸­çš„å·¥å…·å‡½æ•°ï¼Œjs ä¸­çš„å·¥å…·å‡½æ•°ï¼Œå¿…é¡»æœ‰è¾“å…¥å’Œè¾“å‡ºã€‚åœ¨ TS  çš„ç±»å‹ç³»ç»Ÿä¸­èƒ½æ‹…å½“ç±»å‹å…¥å£çš„åªæœ‰æ³›å‹ã€‚

å¯ä»¥è¯´,ä¸€åˆ‡ç±»å‹å·¥å…·çš„åŸºç¡€å°±æ˜¯æ³›å‹ã€‚

### 1.2 ç±»å‹é€’å½’

```
interface Company {
    id: number
    name: string
}
interface Person {
    id: number
    name: string
    adress: string
    company: Company
}
type R5 = Partial<Person>

//åŸç†ï¼šå¯¹å¤–å±‚çš„valueåšä¸ªåˆ¤æ–­,å¦‚æœæ°å¥½æ˜¯objectç±»å‹,é‚£ä¹ˆå¯¹ä»–ä¹Ÿè¿›è¡Œå±æ€§å¯é€‰åŒ–çš„æ“ä½œå³å¯.
type DeepPartial<T> = {
    [U in keyof T]?: T[U] extends object ? DeepPartial<T[U]> : T[U]
}
type R6 = DeepPartial<Person>
```

ä¸Šè¿°ä»£ç ä¸­ï¼ŒPartial<T> åªèƒ½æŠŠæœ€å¤–å±‚å±æ€§å˜ä¸ºå¯é€‰çš„ã€‚æƒ³å¤„ç†æ·±å±‚å±æ€§ï¼Œå°±å¿…é¡»ç”¨åˆ°ç±»å‹é€’å½’ï¼ŒDeepPartial<T> å°±æ˜¯ä½¿ç”¨ç±»å‹é€’å½’çš„ä¾‹å­ğŸŒ°ï¼Œä½¿å¤–å±‚å’Œæ·±å±‚å±æ€§å‡å˜ä¸ºå¯é€‰çš„ã€‚

è¾“å‡ºï¼š

![14-1](./images/14-1.png)

![14-2](./images/14-2.png)

### 1.3 å…³é”®å­—

+ã€- è¿™ä¸¤ä¸ªå…³é”®å­—ç”¨äºæ˜ å°„ç±»å‹ä¸­ç»™å±æ€§æ·»åŠ ä¿®é¥°ç¬¦ã€‚

ä¾‹å­ğŸŒ°ï¼š

```
type Required<T> = { [P in keyof T]-?: T[P] };
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œ`-?` ä»£è¡¨å°†å¯é€‰å±æ€§å˜ä¸ºå¿…é€‰ã€‚

`-readonly`ä»£è¡¨å°†åªè¯»å±æ€§æ”¹ä¸ºéåªè¯»ã€‚

## **2 å¸¸è§å·¥å…·ç±»å‹è§£è¯»**

### 2.1 Omit<T, K>

ä½œç”¨ï¼šå¿½ç•¥Tä¸­çš„Kå±æ€§

```
type Omit<T, K> = Pick<T, Exclude<keyof T, K>>
type Foo = Omit<{name: string, age: number}, 'name'> // -> { age: number }
```



### 2.2 Merge<O1, O2>

ä½œç”¨ï¼šå°†ä¸¤ä¸ªå¯¹è±¡çš„å±æ€§åˆå¹¶

```
//å°†äº¤å‰ç±»å‹åˆå¹¶
type Compute<A extends any> =
    A extends Function
    ? A
    : { [K in keyof A]: A[K] }

type Merge<O1 extends object, O2 extends object> = Compute<O1 & Omit<O2, keyof O1>>

type O1 = {
    name: string
    id: number
}
type O2 = {
    id: number
    from: string
}
type R2 = Merge<O1, O2>
```

è¾“å‡ºï¼š

![14-3](./images/14-3.png)

### 2.3 Intersection<T, U>

ä½œç”¨ï¼šå–Tå’ŒUçš„å…±åŒå±æ€§

```
type Intersection<T extends object, U extends object> = Pick<
  T,
  Extract<keyof T, keyof U> & Extract<keyof U, keyof T>
>;

type Props = { name: string; age: number; visible: boolean };
type DefaultProps = { age: number };
// Expect: { age: number; }
type DuplicatedProps = Intersection<Props, DefaultProps>;
```

### 2.4 Overwrite<T, U>

ç”¨Uçš„å±æ€§è¦†ç›–Tçš„ç›¸åŒå±æ€§

```
//TODO æœ‰é—®é¢˜
type Overwrite<
  T extends object,
  U extends object,
  I = Diff<T, U> & Intersection<U, T>
> = Pick<I, keyof I>;

type Props = { name: string; age: number; visible: boolean };
type NewProps = { age: string; other: string };
// Expect: { name: string; age: string; visible: boolean; }
type ReplacedProps = Overwrite<Props, NewProps>
```

### 2.5 Mutable

å°†æ‰€æœ‰å±æ€§çš„readonlyç§»é™¤

```
type Mutable<T> = {
    -readonly [P in keyof T]: T[P]
}
```

